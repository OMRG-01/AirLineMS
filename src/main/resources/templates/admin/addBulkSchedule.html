<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Bulk Schedule Flights</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	 <meta charset="utf-8" />
	  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	  <link rel="icon" type="image/png" th:href="@{/img/fg.png}">

	  <link rel="stylesheet" type="text/css"
	    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" /> <!--FONT-->

	  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
	  <!-- Material Icons INCOME HE TE -->

	  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	  <!-- CSS Files -->

	  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
		
	  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	  <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>

	  <link id="pagestyle" th:href="@{/assets/css/my.css?v=3.1.0}" rel="stylesheet" />
	  <style>
		.schedule-form-container {
		            background-color: white;
		            border-radius: 15px;
		            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
		            padding: 30px;
		            margin-bottom: 30px;
		        }
		        
		        .form-section {
		            margin-bottom: 25px;
		            padding-bottom: 20px;
		            border-bottom: 1px solid #f0f0f0;
		        }
		        
		        .form-section:last-child {
		            border-bottom: none;
		        }
		        
		        .section-title {
		            color: #8E2157;
		            font-weight: 600;
		            margin-bottom: 15px;
		            font-size: 1.2rem;
		        }
		        
		        /* Day selection styling */
		        .day-selector {
		            display: flex;
		            flex-wrap: wrap;
		            gap: 10px;
		            margin-top: 10px;
		        }
		        
		        .day-card {
		            cursor: pointer;
		            border: 2px solid #e9ecef;
		            border-radius: 10px;
		            padding: 10px 15px;
		            text-align: center;
		            min-width: 100px;
		            transition: all 0.3s ease;
		        }
		        
		        .day-card.selected {
		            background-color: #8E2157;
		            color: white;
		            border-color: #8E2157;
		        }
		        
		        /* Class rate cards */
		        .class-rate-container {
		            display: grid;
		            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
		            gap: 15px;
		            margin-top: 15px;
		        }
		        
		        .class-rate-card {
		            background-color: #f8f9fa;
		            border-radius: 10px;
		            padding: 15px;
		            border: 1px solid #e9ecef;
		        }
		        
		        .class-rate-card label {
		            font-weight: 500;
		            margin-bottom: 8px;
		            display: block;
		        }
		        
		        /* Form focus styles */
		        .form-control:focus, .form-select:focus {
		            border-color: #8E2157;
		            box-shadow: 0 0 0 0.25rem rgba(142, 33, 87, 0.25);
		        }
		        
		        /* Submit button styling */
		        .submit-btn {
		            background-color: #8E2157;
		            border: none;
		            padding: 10px 25px;
		            font-weight: 500;
		            transition: all 0.3s ease;
		        }
		        
		        .submit-btn:hover {
		            background-color: #751a47;
		            transform: translateY(-2px);
		            box-shadow: 0 5px 15px rgba(142, 33, 87, 0.2);
		        }
		        
		        /* Alert styling */
		        .custom-alert {
		            padding: 10px 15px;
		            border-radius: 8px;
		            margin-bottom: 15px;
		            font-size: 0.9rem;
		        }
		        
		        .loading-spinner {
		            width: 20px;
		            height: 20px;
		            border: 2px solid #f3f3f3;
		            border-radius: 50%;
		            border-top: 2px solid #8E2157;
		            animation: spin 1s linear infinite;
		            display: inline-block;
		            margin-right: 10px;
		        }
		        
		        @keyframes spin {
		            0% { transform: rotate(0deg); }
		            100% { transform: rotate(360deg); }
		        }
		.chart-container {
		    display: flex;
		    justify-content: space-between;
		    gap: 20px;
		    margin-bottom: 20px;
		    height: 500px; /* Fixed container height */
		  }
		  
		  .chart-box {
		    flex: 1;
		    height: 500px; /* Fixed height */
		    border: 1px solid #eee;
		    border-radius: 8px;
		    padding: 15px;
		    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		    background-color: white;
		    overflow: hidden; /* Prevent content from overflowing */
		  }
		  
		  .pie-box {
				
		       flex: 1;
		       max-width: 100%;
		       max-height: 90%;
		       border-radius: 8px;
		       padding: 15px;
		     }
	    .chart-title {
	      text-align: center;
	      margin-bottom: 15px;
	      font-weight: 500;
	    }
	    
	    .aaa {
	      height: 50px;
	      width: 165px;
	      margin-right: 10px;
	    }

		.navbar-toggler {
		      display: none;
		      background-color: transparent;
		      border: none;
		      cursor: pointer;
		      padding: 10px;
		    }
		    
		    @media (max-width: 992px) {
		      .navbar-toggler {
		        display: block;
		      }
		    }
		    
		    .navbar-toggler-icon {
		      width: 30px;
		      height: 30px;
		      position: relative;
		      color: #8E2157;
		    }

		    /* Top navbar responsive adjustments */
		    .container2 {
		      display: flex;
		      justify-content: space-between;
		      flex-wrap: wrap;
		    }

		    @media (max-width: 768px) {
		      .container2 {
		        flex-direction: column;
		      }
		      
		      .nav-links {
		        margin-bottom: 10px;
		        width: 100%;
		      }
		    }

		    .nav-links {
		      flex: 1;
		      text-align: left;
		      max-height: none;
		    }

		    .nav-links ul {
		      padding-left: 0;
		      margin-bottom: 0;
		    }

		    .nav-links ul li {
		      list-style: none;
		      display: inline-block;
		      padding: 8px 12px;
		      width: auto;
		      position: relative;
		      font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
		    }

		    @media (max-width: 576px) {
		      .nav-links ul li {
		        display: block;
		        width: 100%;
		        text-align: center;
		      }
		    }

		    .nav-links ul li a {
		      color: black;
		      text-decoration: none;
		      font-size: 15px;
		      white-space: nowrap;
		    }

		    .nav-links ul li::after {
		      content: "";
		      width: 0%;
		      height: 3px;
		      background: #8E2157;
		      display: block;
		      margin: auto;
		      transition: 1s;
		    }

		    .nav-links ul li:hover::after {
		      width: 100%;
		    }
			.btn-demo {
				      background-color: #8E2157;
				      border-color: #8E2157;
				      color: white;
				      border-radius: 20px;
				      padding: 8px 20px;
				      transition: all 0.3s ease;
				    }
				    
				    .btn-demo:hover {
				      background-color: #7a1c4a;
				      border-color: #7a1c4a;
				      transform: translateY(-2px);
				      box-shadow: 0 5px 15px rgba(142, 33, 87, 0.3);
					  color: white;
				    }
	  </style>
	</head>

	<body class="g-sidenav-show  bg-gray-200">
	  <aside
	    class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3   bg-gradient-dark"
	    id="sidenav-main">
	    <div class="sidenav-header">
	      <i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
	        aria-hidden="true" id="iconSidenav"></i>
	      <a class="navbar-brand m-0" href="">
	        <img th:src="@{/img/PH.jpg}" class="navbar-brand-img h-100 border-radius-lg" alt="main_logo">
			<span class="ms-1 font-weight-bold text-white" >Admin Name</span>
	      </a>
	    </div>
	    <hr class="horizontal light mt-0 mb-2">
	    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
	      <ul class="navbar-nav">
	        <li class="nav-item">
	          <a class="nav-link text-white" th:href="@{/admin/dashboard}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">dashboard</i>
	            </div>
	            <span class="nav-link-text ms-1">Dashboard</span>
	          </a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white " th:href="@{/admin/airline-management}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">table_view</i>
	            </div>
	            <span class="nav-link-text ms-1">Airline Management</span>
	          </a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white " th:href="@{/admin/flights/view}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">view_in_ar</i>
	            </div>
	            <span class="nav-link-text ms-1">Flights Management</span>
	          </a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white active bg-gradient-primary" th:href="@{/admin/flights/view-schedules}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">receipt_long</i>
	            </div>
	            <span class="nav-link-text ms-1">Schedule Flight</span>
	          </a>
	        </li>
			<li class="nav-item">
	          <a class="nav-link text-white " th:href="@{/admin/cities/view}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">connecting_airports</i>
	            </div>
	            <span class="nav-link-text ms-1">City Management</span>
	          </a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white " href="passenger-lists.php">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">format_textdirection_r_to_l</i>
	            </div>
	            <span class="nav-link-text ms-1">Passenger Lists</span>
	          </a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white " href="feedback.php">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">notifications</i>
	            </div>
	            <span class="nav-link-text ms-1">Feedback</span>
	          </a>
	        </li>
	        <li class="nav-item mt-3">
	          <h6 class="ps-4 ms-2 text-uppercase text-xs text-white font-weight-bolder opacity-8">Account pages</h6>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white " th:href="@{/admin/editProfile}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">person</i>
	            </div>
	            <span class="nav-link-text ms-1">Profile</span>
	          </a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white " th:href="@{/admin/logout}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">login</i>
	            </div>
	            <span class="nav-link-text ms-1">Logout</span>
	          </a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link text-white " th:href="@{/admin/add}">
	            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
	              <i class="material-icons opacity-10">assignment</i>
	            </div>
	            <span class="nav-link-text ms-1">Add New Member</span>
	          </a>
	        </li>
	      </ul>
	    </div>
	  </aside>
	  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">

	    <!-- Navbar -->
	    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur"
	      data-scroll="true">
	      <div class="container-fluid py-1 px-3">
	        <img class="aaa" th:src="@{/assets/GG-removebg-preview.png}">
	        <div class="container2">
	          <div class="nav-links">
	            <ul>
	              <li><a th:href="@{/admin/flights/add}"> <i class="fa fa-space-shuttle" style="font-size:20px;"></i></i> ADD NEW FLIGHT
	                </a></li>
	            </ul>
	          </div>
	          <div class="nav-links">
	            <ul>
	              <li><a th:href="@{/admin/add-airline}"><i class="fa fa-plane" style="font-size:20px"></i> ADD NEW AIRLINE </a>
	              </li>
	            </ul>
	          </div>
	          <div class="nav-links">
	            <ul>
					<li><a th:href="@{/admin/logout}" style="color:chocolate;"> <i class="fa fa-sign-out"
					                   style="font-size:18px"></i><span class="ms-1 font-weight-bold">Logout</span></a></li>
	            </ul>
	          </div>
	        </div>
	      </div>
	    </nav>
	    <!-- End Navbar -->
		<div class="container mt-4">
		        <div class="schedule-form-container">
		            <h3 class="mb-4" style="color: #8E2157;">Bulk Schedule Flights</h3>
					<a th:href="@{/admin/flights/schedule/manual}">
					                <button style="margin-right: 20px;"  class="btn btn-demo float-end">
					                  <b><i class="fa fa-plane" style="font-size:20px"></i> SCHEDULE SINGLE FLIGHT</b>
					                </button>
					              </a>
		            <form method="post" th:action="@{/admin/flights/bulk-schedule/save}" id="scheduleForm">
		                <!-- Flight Selection Section -->
		                <div class="form-section">
		                    <div class="section-title">
		                        <i class="material-icons opacity-10" style="vertical-align: middle;">flight</i> 
		                        Flight Selection
		                    </div>
		                    <div class="d-flex gap-3 flex-wrap mb-3">
		                        <div class="col-md-5">
		                            <label class="form-label">Airline</label>
		                            <select id="airline" name="airlineId" class="form-select" required>
		                                <option value="">Select Airline</option>
		                                <option th:each="airline : ${airlines}" th:value="${airline.id}" th:text="${airline.aname}"></option>
		                            </select>
		                        </div>
		                        <div class="col-md-5">
		                            <label class="form-label">Flight</label>
		                            <select id="flight" name="flightId" class="form-select" required>
		                                <option value="">First select an airline</option>
		                            </select>
		                            <div id="flightLoading" class="mt-2 d-none">
		                                <span class="loading-spinner"></span> Loading flights...
		                            </div>
		                        </div>
		                    </div>
		                </div>
		                
		                <!-- Route Selection Section -->
		                <div class="form-section">
		                    <div class="section-title">
		                        <i class="material-icons opacity-10" style="vertical-align: middle;">connecting_airports</i>
		                        Route Selection
		                    </div>
		                    <div class="d-flex gap-3 flex-wrap mb-3">
		                        <div class="col-md-5">
		                            <label class="form-label">Source</label>
		                            <select id="sourceCity" name="sourceId" class="form-select" required>
		                                <option value="">Select Source City</option>
		                                <option th:each="city : ${cities}" th:value="${city.id}" th:text="${city.cityname}"></option>
		                            </select>
		                        </div>
		                        <div class="col-md-5">
		                            <label class="form-label">Destination</label>
		                            <select id="destinationCity" name="destinationId" class="form-select" required>
		                                <option value="">Select Destination City</option>
		                                <option th:each="city : ${cities}" th:value="${city.id}" th:text="${city.cityname}"></option>
		                            </select>
		                        </div>
		                    </div>
		                </div>
		                
		                <!-- Schedule Times Section -->
		                <div class="form-section">
		                    <div class="section-title">
		                        <i class="material-icons opacity-10" style="vertical-align: middle;">schedule</i>
		                        Flight Times
		                    </div>
		                    <div class="d-flex gap-3 flex-wrap mb-3">
		                        <div class="col-md-5">
		                            <label class="form-label">Departure Time</label>
		                            <input type="time" name="departTime" class="form-control" required>
		                        </div>
		                        <div class="col-md-5">
		                            <label class="form-label">Arrival Time</label>
		                            <input type="time" name="arriveTime" class="form-control" required>
		                        </div>
		                    </div>
		                </div>
		                
		                <!-- Date Range Section -->
		                <div class="form-section">
		                    <div class="section-title">
		                        <i class="material-icons opacity-10" style="vertical-align: middle;">date_range</i>
		                        Schedule Date Range
		                    </div>
		                    <div class="d-flex gap-3 flex-wrap mb-3">
		                        <div class="col-md-5">
		                            <label class="form-label">Start Date</label>
		                            <input type="date" id="startDate" name="startDate" class="form-control" required>
		                        </div>
		                        <div class="col-md-5">
		                            <label class="form-label">End Date</label>
		                            <input type="date" id="endDate" name="endDate" class="form-control" required>
		                        </div>
		                    </div>
		                </div>
		                
		                <!-- Day Selection Section -->
		                <div class="form-section">
		                    <div class="section-title">
		                        <i class="material-icons opacity-10" style="vertical-align: middle;">view_week</i>
		                        Days of Operation
		                    </div>
		                    <p class="text-muted mb-2">Select which days of the week this flight will operate</p>
		                    
		                    <div class="day-selector">
		                        <div th:each="day : ${T(java.time.DayOfWeek).values()}" class="day-card" th:data-day="${day.name()}">
		                            <span th:text="${day.name().substring(0, 3)}"></span>
		                            <input type="checkbox" name="days" th:value="${day.name()}" style="display: none;">
		                        </div>
		                    </div>
		                </div>
		                
		                <!-- Class Rates Section (Dynamically Populated) -->
		                <div class="form-section">
		                    <div class="section-title">
		                        <i class="material-icons opacity-10" style="vertical-align: middle;">airline_seat_recline_extra</i>
		                        Class Pricing
		                    </div>
		                    <div id="classRatesSection">
		                        <p class="text-muted">Please select a flight to view available classes</p>
		                    </div>
		                </div>
		                
		                <div class="text-center mt-4">
		                    <button type="submit" class="btn btn-primary submit-btn">
		                        <i class="material-icons opacity-10" style="vertical-align: middle; font-size: 16px;">schedule</i>
		                        Create Flight Schedules
		                    </button>
		                </div>
		            </form>
		        
	<footer class="footer py-4">
	        <div class="container-fluid">
	          <div class="row align-items-center justify-content-lg-between">
	            <div class="col-lg-6 mb-lg-0 mb-4">
	              <div class="copyright text-center text-sm text-muted text-lg-start">
	                Â©
	                <script>
	                  document.write(new Date().getFullYear())
	                </script>,
	                Copyright All rights reserved. Team :
	                <a href="" class="font-weight-bold" target="_blank">GMADS <i class="fa fa-heart"></i></a>
	                for a better web.
	              </div>
	            </div>
	            <div class="col-lg-6">
	              <ul class="nav nav-footer justify-content-center justify-content-lg-end">
	                <li class="nav-item">
	                  <a href="" class="nav-link text-muted" target="_blank"><i class="fa fa-facebook-f"></i></a>
	                </li>
	                <li class="nav-item">
	                  <a href="" class="nav-link text-muted" target="_blank"><i class="fa fa-twitter"></i></a>
	                </li>
	                <li class="nav-item">
	                  <a href="" class="nav-link text-muted" target="_blank"><i class="fa fa-instagram"></i></a>
	                </li>
	                <li class="nav-item">
	                  <a href="https://www.youtube.com/channel/UCNCWGkiAKDhwgCuGT02aXCg" class="nav-link text-muted"
	                    target="_blank"><i class="fa fa-youtube-play"></i></a>
	                </li>
	              </ul>
	            </div>
	          </div>
	        </div>
	      </footer>
	    </div>
	  </main>

	  <script>
	          // Set minimum date to today
	          document.addEventListener('DOMContentLoaded', function() {
	              const today = new Date();
	              const yyyy = today.getFullYear();
	              const mm = String(today.getMonth() + 1).padStart(2, '0');
	              const dd = String(today.getDate()).padStart(2, '0');
	              const todayStr = `${yyyy}-${mm}-${dd}`;
	              
	              document.getElementById('startDate').min = todayStr;
	              document.getElementById('endDate').min = todayStr;
	              
	              // Day selection functionality
	              const dayCards = document.querySelectorAll('.day-card');
	              dayCards.forEach(card => {
	                  card.addEventListener('click', function() {
	                      this.classList.toggle('selected');
	                      const checkbox = this.querySelector('input[type="checkbox"]');
	                      checkbox.checked = !checkbox.checked;
	                  });
	              });
	          });
	          
	          // Source and destination handling to prevent same city selection
	          document.getElementById('sourceCity').addEventListener('change', function() {
	              updateDestinationOptions();
	          });
	          
	          document.getElementById('destinationCity').addEventListener('change', function() {
	              updateSourceOptions();
	          });
	          
	          function updateDestinationOptions() {
	              const sourceId = document.getElementById('sourceCity').value;
	              const destinationSelect = document.getElementById('destinationCity');
	              
	              // Store current selection if any
	              const currentDestination = destinationSelect.value;
	              
	              // Show all options first
	              for (let i = 0; i < destinationSelect.options.length; i++) {
	                  destinationSelect.options[i].disabled = false;
	              }
	              
	              // Disable the source city in destination dropdown
	              if (sourceId) {
	                  for (let i = 0; i < destinationSelect.options.length; i++) {
	                      if (destinationSelect.options[i].value === sourceId) {
	                          destinationSelect.options[i].disabled = true;
	                      }
	                  }
	                  
	                  // If current destination is now the disabled one, clear it
	                  if (currentDestination === sourceId) {
	                      destinationSelect.value = "";
	                  }
	              }
	          }
	          
	          function updateSourceOptions() {
	              const destinationId = document.getElementById('destinationCity').value;
	              const sourceSelect = document.getElementById('sourceCity');
	              
	              // Store current selection if any
	              const currentSource = sourceSelect.value;
	              
	              // Show all options first
	              for (let i = 0; i < sourceSelect.options.length; i++) {
	                  sourceSelect.options[i].disabled = false;
	              }
	              
	              // Disable the destination city in source dropdown
	              if (destinationId) {
	                  for (let i = 0; i < sourceSelect.options.length; i++) {
	                      if (sourceSelect.options[i].value === destinationId) {
	                          sourceSelect.options[i].disabled = true;
	                      }
	                  }
	                  
	                  // If current source is now the disabled one, clear it
	                  if (currentSource === destinationId) {
	                      sourceSelect.value = "";
	                  }
	              }
	          }
	          
	          // Date validation
	          document.getElementById('startDate').addEventListener('change', function() {
	              const endDateInput = document.getElementById('endDate');
	              endDateInput.min = this.value;
	              
	              // If end date is before start date, update it
	              if (endDateInput.value && endDateInput.value < this.value) {
	                  endDateInput.value = this.value;
	              }
	          });
	          
	          // Airline and flight handling
	          document.getElementById('airline').addEventListener('change', function() {
	              const airlineId = this.value;
	              const flightSelect = document.getElementById('flight');
	              const loadingIndicator = document.getElementById('flightLoading');
	              
	              if (!airlineId) {
	                  flightSelect.innerHTML = '<option value="">First select an airline</option>';
	                  return;
	              }
	              
	              flightSelect.innerHTML = '<option value="">Loading...</option>';
	              loadingIndicator.classList.remove('d-none');
	              
	              fetch(`/admin/flights/by-airline/${airlineId}`)
	                  .then(res => res.json())
	                  .then(data => {
	                      loadingIndicator.classList.add('d-none');
	                      
	                      if (data.length === 0) {
	                          flightSelect.innerHTML = '<option value="">No flights found for this airline</option>';
	                          return;
	                      }
	                      
	                      flightSelect.innerHTML = '<option value="">Select Flight</option>';
	                      data.forEach(flight => {
	                          const option = document.createElement('option');
	                          option.value = flight.id;
	                          option.text = flight.fnumber;
	                          flightSelect.appendChild(option);
	                      });
	                  })
	                  .catch(error => {
	                      loadingIndicator.classList.add('d-none');
	                      flightSelect.innerHTML = '<option value="">Error loading flights</option>';
	                      console.error('Error fetching flights:', error);
	                  });
	          });
	          
	          document.getElementById('flight').addEventListener('change', function() {
	              const flightId = this.value;
	              const classRatesSection = document.getElementById('classRatesSection');
	              
	              if (!flightId) {
	                  classRatesSection.innerHTML = '<p class="text-muted">Please select a flight to view available classes</p>';
	                  return;
	              }
	              
	              classRatesSection.innerHTML = '<div class="text-center"><span class="loading-spinner"></span> Loading class information...</div>';
	              
	              fetch(`/admin/flights/classes/${flightId}`)
	                  .then(res => res.json())
	                  .then(data => {
	                      if (!data.classes || data.classes.length === 0) {
	                          classRatesSection.innerHTML = '<div class="alert alert-warning custom-alert">No class information available for this flight</div>';
	                          return;
	                      }
	                      
	                      let html = '<div class="class-rate-container">';
	                      data.classes.forEach(c => {
	                          html += `
	                              <div class="class-rate-card">
	                                  <label for="price_${c.classId}">
	                                      <strong>${c.className}</strong> 
	                                      <span class="badge bg-light text-dark">${c.seat} seats</span>
	                                  </label>
	                                  <div class="input-group">
	                                      <span class="input-group-text">$</span>
	                                      <input type="number" 
	                                          id="price_${c.classId}" 
	                                          name="price_${c.classId}" 
	                                          class="form-control" 
	                                          placeholder="Enter price" 
	                                          step="0.01" 
	                                          min="0" 
	                                          required>
	                                  </div>
	                              </div>
	                          `;
	                      });
	                      html += '</div>';
	                      classRatesSection.innerHTML = html;
	                  })
	                  .catch(error => {
	                      classRatesSection.innerHTML = '<div class="alert alert-danger custom-alert">Error loading class information</div>';
	                      console.error('Error fetching class info:', error);
	                  });
	          });
	          
	          // Form validation
	          document.getElementById('scheduleForm').addEventListener('submit', function(e) {
	              // Check if any days are selected
	              const selectedDays = document.querySelectorAll('input[name="days"]:checked');
	              if (selectedDays.length === 0) {
	                  e.preventDefault();
	                  alert('Please select at least one day of the week for flight operation');
	                  return;
	              }
	              
	              // Additional validation can be added here
	          });
	      </script>
</body>
</html>
